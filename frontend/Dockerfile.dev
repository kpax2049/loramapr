FROM node:20

WORKDIR /app/frontend

COPY package.json package-lock.json ./
RUN npm ci

COPY . .

ARG FRONTEND_PORT=5173
ARG VITE_API_BASE_URL=http://backend:3000
ENV FRONTEND_PORT=${FRONTEND_PORT}
ENV VITE_API_BASE_URL=${VITE_API_BASE_URL}

EXPOSE 5173

CMD ["sh", "-c", "npm run dev -- --host 0.0.0.0 --port ${FRONTEND_PORT}"]
